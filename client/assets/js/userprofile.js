// moved from client/userprofile.js
const postsContainer = document.getElementById("postsContainer");
const videosContainer = document.getElementById("videosContainer");
for (let i = 1; i <= 6; i++) { const div = document.createElement("div"); div.className = "post"; div.innerText = `Post ${i}`; postsContainer.appendChild(div); }
for (let i = 1; i <= 3; i++) { const div = document.createElement("div"); div.className = "post video"; div.innerText = `Video ${i}`; videosContainer.appendChild(div); }
function loadProfile(){ let profile = JSON.parse(localStorage.getItem("userProfile")); if(!profile){ const defaultProfile = { firstName: "Investor", surname: "Connect", age: 30, dob: "1995-01-01", email: "investor@connect.com", phone: "555-INVEST", bio: "Add something about yourself...", profilePic: "https://via.placeholder.com/150/0095f6/FFFFFF?text=IC" }; localStorage.setItem("userProfile", JSON.stringify(defaultProfile)); profile = defaultProfile; } document.getElementById("profileName").innerText = profile.firstName + " " + profile.surname; document.getElementById("profileAge").innerText = "Age: " + profile.age; document.getElementById("profileDob").innerText = "DOB: " + profile.dob; document.getElementById("profileEmail").innerText = "Email: " + profile.email; document.getElementById("profilePhone").innerText = "Phone: " + profile.phone; document.getElementById("profileBio").innerText = "Bio: " + profile.bio; if (profile.profilePic) { document.getElementById("profilePhoto").src = profile.profilePic; } document.getElementById("postCount").innerText = postsContainer.children.length; document.getElementById("videoCount").innerText = videosContainer.children.length; }
const tabButtons = document.querySelectorAll(".tab-button"); tabButtons.forEach(button => { button.addEventListener("click", () => { tabButtons.forEach(btn => btn.classList.remove("active")); document.querySelectorAll(".content-grid").forEach(grid => grid.classList.add("hidden")); button.classList.add("active"); document.getElementById(button.getAttribute("data-content") + "Container").classList.remove("hidden"); }); });
// modals
if(document.getElementById("editProfileBtn")){
  document.getElementById("editProfileBtn").addEventListener("click", ()=>{ const profile = JSON.parse(localStorage.getItem("userProfile")); if(profile){ document.getElementById("editFirstName").value = profile.firstName; document.getElementById("editSurname").value = profile.surname; document.getElementById("editAge").value = profile.age; document.getElementById("editDob").value = profile.dob; document.getElementById("editEmail").value = profile.email; document.getElementById("editPhone").value = profile.phone; } document.getElementById("editModal").classList.remove("hidden"); });
  document.getElementById("closeModal").addEventListener("click", ()=>{ document.getElementById("editModal").classList.add("hidden"); });
  document.getElementById("closeModalIcon").addEventListener("click", ()=>{ document.getElementById("editModal").classList.add("hidden"); });
  document.getElementById("editProfileForm").addEventListener("submit", (e)=>{ e.preventDefault(); const currentProfile = JSON.parse(localStorage.getItem("userProfile")) || {}; const updatedProfile = { ...currentProfile, firstName: document.getElementById("editFirstName").value.trim(), surname: document.getElementById("editSurname").value.trim(), age: document.getElementById("editAge").value, dob: document.getElementById("editDob").value, email: document.getElementById("editEmail").value.trim(), phone: document.getElementById("editPhone").value.trim(), profilePic: currentProfile.profilePic }; const newPic = document.getElementById("editProfilePic").files[0]; if(newPic){ const reader = new FileReader(); reader.onload = ()=>{ updatedProfile.profilePic = reader.result; localStorage.setItem("userProfile", JSON.stringify(updatedProfile)); loadProfile(); document.getElementById("editModal").classList.add("hidden"); }; reader.readAsDataURL(newPic); } else { localStorage.setItem("userProfile", JSON.stringify(updatedProfile)); loadProfile(); document.getElementById("editModal").classList.add("hidden"); } });
}
if(document.getElementById("editBioBtn")){
  document.getElementById("editBioBtn").addEventListener("click", ()=>{ const profile = JSON.parse(localStorage.getItem("userProfile")); document.getElementById("bioInput").value = profile.bio || ""; document.getElementById("bioModal").classList.remove("hidden"); });
  document.getElementById("closeBioModal").addEventListener("click", ()=>{ document.getElementById("bioModal").classList.add("hidden"); });
  document.getElementById("closeBioModalIcon").addEventListener("click", ()=>{ document.getElementById("bioModal").classList.add("hidden"); });
  document.getElementById("editBioForm").addEventListener("submit", (e)=>{ e.preventDefault(); const currentProfile = JSON.parse(localStorage.getItem("userProfile")); currentProfile.bio = document.getElementById("bioInput").value.trim(); localStorage.setItem("userProfile", JSON.stringify(currentProfile)); loadProfile(); document.getElementById("bioModal").classList.add("hidden"); });
}
window.onload = loadProfile;
